# Rap Scraper Project ‚Äî AI Agent Context (–û–±## üê≥ DOCKER ECOSYSTEM (–û–ë–ù–û–í–õ–ï–ù–û - 30.09.2025)

### Docker Compose Structure
- **`docker-compose.yml`** - Production (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π: API + PostgreSQL + Redis)
- **`docker-compose.dev.yml`** - Development (+ pgAdmin + Grafana + Prometheus)
- **`docker-compose.pgvector.yml`** - Database only (PostgreSQL + Redis –¥–ª—è –ª–æ–∫–∞–ª–∫–∏)

### Key Commands
```bash
make docker-up      # Production stack
make docker-dev     # Full development stack
make docker-db      # Only database for local development
make docker-down    # Stop all services
```

### Build Context Optimization
- **Build context size**: 50MB (–±—ã–ª–æ 500MB)
- **Build time**: 30-60 seconds (–±—ã–ª–æ 2-3 –º–∏–Ω—É—Ç—ã)
- **Optimized .dockerignore**: –∏—Å–∫–ª—é—á–µ–Ω—ã data/, logs/, tests/, *.db

### üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# QUICK COMMANDS (Start Here)
# üê≥ DOCKER COMMANDS (–û–ë–ù–û–í–õ–ï–ù–û - 30.09.2025)
make docker-up       # Production stack (API + PostgreSQL + Redis)
make docker-dev      # Development stack (+ pgAdmin + Grafana + Prometheus)
make docker-db       # Database only (PostgreSQL + Redis –¥–ª—è –ª–æ–∫–∞–ª–∫–∏)
make docker-down     # Stop all services
make docker-logs     # Show API logs
make docker-ps       # Show running containers

# ü§ñ QWEN ML MODEL (–û–°–ù–û–í–ù–ê–Ø –ú–û–î–ï–õ–¨)
python models/test_qwen.py --test-api          # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ QWEN API
python models/test_qwen.py --prepare-dataset   # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ dataset (1000 samples)
python models/test_qwen.py --train             # –°–∏–º—É–ª—è—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è
python models/test_qwen.py --all               # –ü–æ–ª–Ω—ã–π ML pipeline

# üöÄ ML API SERVICE (Production Ready)
python src/models/ml_api_service.py --host 127.0.0.1 --port 8001
python test_ml_api.py                          # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ML API

# MULTI-REGION DEPLOYMENT (Enterprise)
.\multi-region\deploy-multi-region.ps1 -Action deploy      # Deploy all regions
.\multi-region\deploy-multi-region.ps1 -Action status      # Check status
python multi-region/test-multi-region.py                   # Test deployment

# GITOPS DEPLOYMENT 
./gitops/install-argocd.ps1                    # Install ArgoCD
kubectl port-forward svc/argocd-server -n argocd 8080:443  # Access UI
kubectl get applications -n argocd             # Check app status

# KUBERNETES STATUS
kubectl get pods -n rap-analyzer               # Check app pods
helm status rap-analyzer -n rap-analyzer       # Helm status

# DATABASE DIAGNOSTICS (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
python scripts/tools/database_diagnostics.py --quick
python scripts/mass_qwen_analysis.py --test
python scripts/db_browser.py
```01-19)

> **Kubernetes-native enterprise ML-pipeline** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä—ç–ø-—Ç–µ–∫—Å—Ç–æ–≤ —Å **PostgreSQL + pgvector**,## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê

### –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (2025-09-28)
- üéµ **–¢—Ä–µ–∫–∏**: 57,718 (PostgreSQL)
- ü§ñ **–ê–Ω–∞–ª–∏–∑ Qwen**: 57,716 (100.0%) | **‚úÖ –ó–ê–í–ï–†–®–ï–ù**
- ü§ñ **–ê–Ω–∞–ª–∏–∑ Gemma**: 34,320 (59.4%)  
- üßÆ **–ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑**: 57,716 (100.0%) | **‚úÖ –ó–ê–í–ï–†–®–ï–ù**
- üéØ **–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑**: 57,718/57,718 (100.0%)
- üìä **–í—Å–µ–≥–æ –∞–Ω–∞–ª–∏–∑–æ–≤**: 269,646
- üêò **–ë–∞–∑–∞**: PostgreSQL 15 + connection pool (20 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π)
- ‚ò∏Ô∏è **Kubernetes**: Production-ready –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å monitoring

### ü§ñ ML Models Status (NEW - 2025-09-28)
- üéØ **Primary Model**: QWEN/qwen3-4b-fp8 via Novita AI ‚úÖ WORKING
- üìä **Training Dataset**: 1000 samples (800 train / 200 eval) ‚úÖ READY
- üéØ **Training Success**: 100% success rate, 5947 tokens
- üìà **Evaluation Metrics**: MAE: 0.450, RMSE: 0.450 ‚úÖ VALIDATED
- üöÄ **ML API Service**: FastAPI —Å **QWEN Primary**, T5, Quality Predictor, Trend Analysis ‚úÖ WORKING
- üìÅ **Results**: `results/qwen_training/` - –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

### –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **Phase 1: Kubernetes Migration –ó–ê–í–ï–†–®–ï–ù–ê** (2025-01-19)
- ‚úÖ **Phase 2: Multi-Region Deployment –ó–ê–í–ï–†–®–ï–ù–ê** (2025-01-19)
- ‚úÖ **Phase 2: GitOps Integration –ó–ê–í–ï–†–®–ï–ù–ê** (2025-01-19)
- ‚úÖ **Phase 4: Custom ML Models System –ó–ê–í–ï–†–®–ï–ù–ê** (2025-09-28)
- ‚úÖ **QWEN Primary Model –ù–ê–°–¢–†–û–ï–ù–ê** (2025-09-28)
- ‚úÖ **PostgreSQL –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞** (100% —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ **Concurrent processing –≥–æ—Ç–æ–≤** (20 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –≤ –ø—É–ª–µ)
- ‚úÖ **–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω** (269,646 –∞–Ω–∞–ª–∏–∑–æ–≤, 100% coverage)
- ‚ò∏Ô∏è **Production Infrastructure**: Helm chart, monitoring, auto-scaling
- üåç **Multi-Region Architecture**: Global deployment (US-East-1, US-West-2, EU-West-1)
- üöÄ **GitOps Workflow**: ArgoCD, automated deployments, self-healing
- üéØ **Current**: Phase 5 - Advanced AI Integration —Å QWEN –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥–µ–ª—å—écontainer orchestration, –∏ comprehensive monitoring stack

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´ –î–õ–Ø AI –ê–ì–ï–ù–¢–ê

### ÔøΩ **–ü–†–ê–í–ò–õ–ê –†–ê–ë–û–¢–´ –° –•–†–û–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ú–ò –§–ê–ô–õ–ê–ú–ò**
‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ —Å —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏–µ–π (PROGRESS.md, changelog, –∏—Å—Ç–æ—Ä–∏—è):
- ‚úÖ **–ù–û–í–´–ï –∑–∞–ø–∏—Å–∏ –í–°–ï–ì–î–ê –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –í –í–ï–†–• —Ñ–∞–π–ª–∞** (–ø–æ—Å–ª–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞)
- ‚ùå **–ù–ï –¥–æ–±–∞–≤–ª—è–π –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞** - —ç—Ç–æ —Ç—Ä–∞—Ç–∏—Ç —Ç–æ–∫–µ–Ω—ã –Ω–∞ –ø–æ–∏—Å–∫ –º–µ—Å—Ç–∞
- üéØ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –°–≤–µ–∂–∏–µ –∑–∞–ø–∏—Å–∏ —Å–≤–µ—Ä—Ö—É ‚Üí —Å—Ç–∞—Ä—ã–µ —Å–Ω–∏–∑—É
- üìÖ **–§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã:** `## üìÖ YYYY-MM-DD | –ó–ê–ì–û–õ–û–í–û–ö –ò–ó–ú–ï–ù–ï–ù–ò–Ø`

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**
```markdown
# üìã –î–Ω–µ–≤–Ω–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞

## üìÖ 2025-09-18 | –ù–û–í–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï üöÄ
### –°–≤–µ–∂–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–¥–µ—Å—å...

## üìÖ 2025-09-16 | –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
### –°—Ç–∞—Ä—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è...
```

### ÔøΩüî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –û–°–ù–û–í–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê (–∏—Å–ø–æ–ª—å–∑—É–π –ü–ï–†–í–û–ô)
python scripts/tools/database_diagnostics.py --quick

# –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï AI –ê–ù–ê–õ–ò–ó–ê
python scripts/mass_qwen_analysis.py --test

# –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–ê–Ø –†–ê–ë–û–¢–ê –° –ë–î
python scripts/db_browser.py

# –ü–†–û–í–ï–†–ö–ê CONCURRENT –î–û–°–¢–£–ü–ê
python scripts/tools/database_diagnostics.py --connections
```

---

## üìä –ü–û–õ–ù–ê–Ø –°–•–ï–ú–ê –ë–ê–ó–´ –î–ê–ù–ù–´–• (PostgreSQL)

### üéµ –¢–∞–±–ª–∏—Ü–∞ `tracks` (57,718 –∑–∞–ø–∏—Å–µ–π) - –û–°–ù–û–í–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê
```sql
CREATE TABLE tracks (
    id                      SERIAL PRIMARY KEY,              -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Ç—Ä–µ–∫–∞
    title                   VARCHAR NOT NULL,                -- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞
    artist                  VARCHAR NOT NULL,                -- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
    lyrics                  TEXT,                            -- –¢–µ–∫—Å—Ç –ø–µ—Å–Ω–∏ (–û–°–ù–û–í–ù–û–ï –ü–û–õ–ï)
    url                     TEXT,                            -- URL –Ω–∞ Genius.com
    genius_id               INTEGER,                         -- ID –≤ Genius API
    scraped_date            TIMESTAMP,                       -- –î–∞—Ç–∞ —Å–∫—Ä–∞–ø–∏–Ω–≥–∞
    word_count              INTEGER,                         -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤
    genre                   VARCHAR,                         -- –ñ–∞–Ω—Ä
    release_date            DATE,                            -- –î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞
    album                   VARCHAR,                         -- –ê–ª—å–±–æ–º
    language                VARCHAR,                         -- –Ø–∑—ã–∫
    explicit                BOOLEAN,                         -- Explicit –∫–æ–Ω—Ç–µ–Ω—Ç
    song_art_url            TEXT,                           -- URL –æ–±–ª–æ–∂–∫–∏
    popularity_score        INTEGER,                        -- –û—Ü–µ–Ω–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
    lyrics_quality_score    REAL,                           -- –ö–∞—á–µ—Å—Ç–≤–æ —Ç–µ–∫—Å—Ç–∞ (0-1)
    created_at              TIMESTAMP DEFAULT CURRENT_TIMESTAMP, -- –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
    spotify_data            JSONB                           -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ Spotify (59% coverage)
);

-- –ò–ù–î–ï–ö–°–´:
CREATE INDEX idx_tracks_artist ON tracks(artist);
CREATE INDEX idx_tracks_title ON tracks(title);
CREATE INDEX idx_tracks_lyrics_not_null ON tracks(id) WHERE lyrics IS NOT NULL;
CREATE INDEX idx_tracks_spotify_data ON tracks USING GIN(spotify_data);
```

### üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê SPOTIFY –û–ë–û–ì–ê–©–ï–ù–ò–Ø
- **–í—Å–µ–≥–æ —Ç—Ä–µ–∫–æ–≤**: 57,718
- **–° Spotify –¥–∞–Ω–Ω—ã–º–∏**: 34,066 (59.02%)
- **–ë–µ–∑ Spotify –¥–∞–Ω–Ω—ã—Ö**: 23,652 (40.98%)
- **–°—Ä–µ–¥–Ω—è—è –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å**: 30.5 (–¥–∏–∞–ø–∞–∑–æ–Ω: 1-94)
- **–¢–æ–ø –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏**: Gucci Mane (476), Chief Keef (469), Snoop Dogg (469)

### ü§ñ –¢–∞–±–ª–∏—Ü–∞ `analysis_results` (269,646 –∞–Ω–∞–ª–∏–∑–æ–≤) - –ü–û–õ–ù–´–ô –û–•–í–ê–¢
```sql
CREATE TABLE analysis_results (
    id                   SERIAL PRIMARY KEY,        -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∞–Ω–∞–ª–∏–∑–∞
    track_id             INTEGER REFERENCES tracks(id), -- –°–≤—è–∑—å —Å —Ç—Ä–µ–∫–æ–º
    analyzer_type        VARCHAR(50),               -- –¢–∏–ø –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
    sentiment            VARCHAR,                   -- –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–Ω
    confidence           NUMERIC,                   -- –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞ (0-1)
    themes               TEXT,                      -- JSON —Å–ø–∏—Å–æ–∫ —Ç–µ–º
    analysis_data        JSONB,                     -- –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏–∑–∞
    created_at           TIMESTAMP DEFAULT NOW(),   -- –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞
    complexity_score     NUMERIC,                   -- –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (0-1)
    processing_time_ms   INTEGER,                   -- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –º—Å
    model_version        VARCHAR                    -- –í–µ—Ä—Å–∏—è –º–æ–¥–µ–ª–∏
);

-- –ò–ù–î–ï–ö–°–´:
CREATE INDEX idx_analysis_track_id ON analysis_results(track_id);
CREATE INDEX idx_analysis_analyzer_type ON analysis_results(analyzer_type);
CREATE INDEX idx_analysis_created_at ON analysis_results(created_at);
```

### üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û –ê–ù–ê–õ–ò–ó–ê–¢–û–†–ê–ú (–∞–∫—Ç—É–∞–ª—å–Ω–æ –Ω–∞ 2025-09-26)
```
ü§ñ –¢–ò–ü–´ –ê–ù–ê–õ–ò–ó–ê–¢–û–†–û–í –ò –ò–• –ü–û–ö–†–´–¢–ò–ï:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Analyzer Type           ‚îÇ –ê–Ω–∞–ª–∏–∑–æ–≤  ‚îÇ –¢—Ä–µ–∫–æ–≤    ‚îÇ –î–æ–ª—è    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ simplified_features     ‚îÇ 115,434   ‚îÇ 57,717    ‚îÇ 42.8%   ‚îÇ
‚îÇ qwen-3-4b-fp8          ‚îÇ 61,933    ‚îÇ 57,716    ‚îÇ 23.0%   ‚îÇ
‚îÇ simplified_features_v2  ‚îÇ 57,717    ‚îÇ 57,717    ‚îÇ 21.4%   ‚îÇ
‚îÇ gemma-3-27b-it         ‚îÇ 34,320    ‚îÇ 34,320    ‚îÇ 12.7%   ‚îÇ
‚îÇ emotion_analyzer_v2     ‚îÇ 207       ‚îÇ 207       ‚îÇ 0.1%    ‚îÇ
‚îÇ mock_analyzer_v1        ‚îÇ 27        ‚îÇ 27        ‚îÇ 0.0%    ‚îÇ
‚îÇ ollama:llama3.2:3b     ‚îÇ 8         ‚îÇ 8         ‚îÇ 0.0%    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üìä –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
‚Ä¢ –í—Å–µ–≥–æ —Ç—Ä–µ–∫–æ–≤: 57,718
‚Ä¢ –¢—Ä–µ–∫–æ–≤ —Å —Ç–µ–∫—Å—Ç–∞–º–∏: 57,718 (100%)  
‚Ä¢ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤: 57,718 (100%)
‚Ä¢ –í—Å–µ–≥–æ –∞–Ω–∞–ª–∏–∑–æ–≤: 269,646
‚Ä¢ –°—Ä–µ–¥–Ω–∏–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ —Ç—Ä–µ–∫: 4.7
‚Ä¢ –†–∞–∑–º–µ—Ä –ë–î: ~420 MB
```

### üîç –í–ê–ñ–ù–´–ï SQL-–ó–ê–ü–†–û–°–´ –î–õ–Ø AI –ê–ì–ï–ù–¢–ê
```sql
-- –ù–∞–π—Ç–∏ —Ç—Ä–µ–∫–∏ –±–µ–∑ Qwen –∞–Ω–∞–ª–∏–∑–∞
SELECT t.id, t.artist, t.title 
FROM tracks t 
LEFT JOIN analysis_results ar ON t.id = ar.track_id 
  AND ar.analyzer_type = 'qwen-3-4b-fp8'
WHERE ar.id IS NULL AND t.lyrics IS NOT NULL
ORDER BY t.id
LIMIT 100;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤
SELECT 
    analyzer_type,
    COUNT(*) as total_analyses,
    COUNT(DISTINCT track_id) as unique_tracks,
    AVG(confidence) as avg_confidence,
    AVG(complexity_score) as avg_complexity
FROM analysis_results 
GROUP BY analyzer_type 
ORDER BY total_analyses DESC;

-- –¢—Ä–µ–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è —Å –∞–Ω–∞–ª–∏–∑–æ–º
SELECT t.id, t.title, t.artist, ar.analyzer_type, ar.confidence
FROM tracks t
LEFT JOIN analysis_results ar ON t.id = ar.track_id
WHERE t.artist ILIKE '%eminem%'
ORDER BY t.id;

-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∞–Ω–∞–ª–∏–∑—ã
SELECT t.artist, t.title, ar.analyzer_type, ar.created_at, ar.confidence
FROM analysis_results ar
JOIN tracks t ON ar.track_id = t.id
ORDER BY ar.created_at DESC
LIMIT 20;
```

---

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê

### –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (2025-09-26)
- üéµ **–¢—Ä–µ–∫–∏**: 57,718 (PostgreSQL)
- ü§ñ **–ê–Ω–∞–ª–∏–∑ Qwen**: 57,716 (100.0%) | **‚úÖ –ó–ê–í–ï–†–®–ï–ù**
- ü§ñ **–ê–Ω–∞–ª–∏–∑ Gemma**: 34,320 (59.4%)  
- üßÆ **–ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑**: 57,716 (100.0%) | **‚úÖ –ó–ê–í–ï–†–®–ï–ù**
- üéØ **–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑**: 57,718/57,718 (100.0%)
- ÔøΩ **–í—Å–µ–≥–æ –∞–Ω–∞–ª–∏–∑–æ–≤**: 269,646
- ÔøΩüêò **–ë–∞–∑–∞**: PostgreSQL 15 + connection pool (20 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π)
- ‚úÖ **Concurrent**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **PostgreSQL –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞** (100% —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ **Concurrent processing –≥–æ—Ç–æ–≤** (20 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –≤ –ø—É–ª–µ)
- ‚úÖ **Qwen –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω** (57,716 —Ç—Ä–µ–∫–æ–≤ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- ‚úÖ **–ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω** (57,716 —Ç—Ä–µ–∫–æ–≤ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- üéØ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ NEW_FEATURE.md

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (PostgreSQL-—Ü–µ–Ω—Ç—Ä–∏—á–Ω–∞—è)

### Multi-Region + GitOps Architecture
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MULTI-REGION DEPLOYMENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ US-EAST-1 (PRIMARY) ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ US-WEST-2 (REPLICA) ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ PostgreSQL Primary     ‚îÇ  ‚îÇ  ‚Ä¢ PostgreSQL Replica     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Read/Write Operations  ‚îÇ‚îÄ‚îÄ‚î§  ‚Ä¢ Read-Only Operations    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Streaming Replication  ‚îÇ  ‚îÇ  ‚Ä¢ Hot Standby            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ ArgoCD ApplicationSet  ‚îÇ  ‚îÇ  ‚Ä¢ Regional API           ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                   ‚îÇ                              ‚îÇ               ‚îÇ
‚îÇ                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Replication ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§               ‚îÇ
‚îÇ                                                  ‚îÇ               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ EU-WEST-1 (REPLICA + GDPR) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§               ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ PostgreSQL Replica (GDPR Compliant)       ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Read-Only Operations                       ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Data Sovereignty Compliance                ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Regional API + Monitoring                  ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ GITOPS WORKFLOW ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ GIT REPOSITORY ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ ARGOCD CONTROLLER ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Helm Charts        ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  ‚Ä¢ Monitors Git Repo    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ K8s Manifests      ‚îÇ    ‚îÇ  ‚Ä¢ Automated Sync       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Multi-Region Config‚îÇ    ‚îÇ  ‚Ä¢ Self-Healing         ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ  ‚Ä¢ Cross-Region Deploy  ‚îÇ ‚îÇ
‚îÇ                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                            ‚îÇ              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ KUBERNETES CLUSTER ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                            ‚ñº              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ INGRESS CONTROLLER ‚îÄ‚îÄ‚îÄ‚îê                            ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Global Load Balancing  ‚îÇ                            ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ SSL Termination        ‚îÇ                            ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Multi-Region Routing   ‚îÇ                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                            ‚îÇ
‚îÇ              ‚îÇ                                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ FASTAPI SERVICE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Regional Auto-scaling       ‚îÇ                      ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ HPA (CPU/Memory based)      ‚îÇ                      ‚îÇ  
‚îÇ  ‚îÇ  ‚Ä¢ Health Probes              ‚îÇ                      ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Cross-Region Load Balancing ‚îÇ                      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ
‚îÇ              ‚îÇ                                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ POSTGRESQL + pgvector ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Primary/Replica StatefulSets   ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Cross-Region Replication       ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Vector Similarity Search       ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Regional Connection Pools      ‚îÇ                   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ              ‚îÇ                                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MONITORING STACK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ Prometheus (Multi-Region) ‚îÄ‚îê‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ Cross-Region Metrics       ‚îÇ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ Replication Lag Alerts     ‚îÇ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ Grafana (Global) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ Multi-Region Dashboards    ‚îÇ ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ Global Performance Views   ‚îÇ ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

### Legacy Development –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞:
‚îú‚îÄ‚îÄ src/database/postgres_adapter.py     # PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–û–°–ù–û–í–ê)
‚îú‚îÄ‚îÄ scripts/mass_qwen_analysis.py        # –ú–∞—Å—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ (–ì–õ–ê–í–ù–´–ô)
‚îú‚îÄ‚îÄ scripts/tools/database_diagnostics.py # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–ü–ï–†–í–ê–Ø –ü–û–ú–û–©–¨)
‚îú‚îÄ‚îÄ config.yaml                          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env                                 # PostgreSQL credentials
‚îî‚îÄ‚îÄ scripts/db_browser.py               # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä –ë–î
```

### Database Layer (PostgreSQL)
- **Adapter**: `src/database/postgres_adapter.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏
- **Pool**: 20 max –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è concurrent —Å–∫—Ä–∏–ø—Ç–æ–≤
- **Drivers**: `asyncpg` (async) + `psycopg2` (sync)
- **Migration**: –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∏–∑ SQLite –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### AI Analysis Pipeline
- **Qwen API**: `scripts/mass_qwen_analysis.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
- **Local Models**: Gemma, Ollama –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- **Progress Tracking**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- **Error Recovery**: Robust –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

### üìã –í–°–ï –¢–ê–ë–õ–ò–¶–´ –í POSTGRESQL
- **`tracks`** - –û–°–ù–û–í–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê (57,718 –∑–∞–ø–∏—Å–µ–π)
- **`analysis_results`** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã AI –∞–Ω–∞–ª–∏–∑–∞ (256,021 –∑–∞–ø–∏—Å–µ–π)  
- **`songs`** - LEGACY –¢–ê–ë–õ–ò–¶–ê (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–¥–∞–ª–µ–Ω–∏–µ)

### ‚ö†Ô∏è –¢–ê–ë–õ–ò–¶–ê `songs` - –£–î–ê–õ–ò–¢–¨?
**–°–¢–ê–¢–£–°**: Legacy —Ç–∞–±–ª–∏—Ü–∞, –¥—É–±–ª–∏—Ä—É–µ—Ç `tracks`
**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø**: ‚úÖ **–£–î–ê–õ–ò–¢–¨** –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
**–ü–†–ò–ß–ò–ù–ê**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ `tracks`, –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É

---

## ü§ñ AI –ê–ì–ï–ù–¢ WORKFLOW

### 1. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º (–û–ë–ù–û–í–õ–ï–ù–ù–´–ô –ü–†–û–¢–û–ö–û–õ)
```python
def investigate_issue(problem_description):
    # –®–ê–ì 1: –ë–ê–ó–ê –î–ê–ù–ù–´–• (–í–°–ï–ì–î–ê –ü–ï–†–í–´–ô)
    run_command("python scripts/tools/database_diagnostics.py --quick")
    
    # –®–ê–ì 2: –°–ü–ï–¶–ò–§–ò–ß–ï–°–ö–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê
    if "analysis" in problem_description.lower():
        run_command("python scripts/mass_qwen_analysis.py --test")
    elif "connection" in problem_description.lower():
        run_command("python scripts/tools/database_diagnostics.py --connections")
    elif "concurrent" in problem_description.lower():
        run_command("python scripts/db_browser.py") # —Ç–µ—Å—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
    
    # –®–ê–ì 3: –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
    check_file(".env")  # PostgreSQL credentials
    check_file("config.yaml")  # —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    
    # –®–ê–ì 4: –ö–û–î –ê–ù–ê–õ–ò–ó (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
    if requires_code_investigation():
        check_file("src/database/postgres_adapter.py")  # database layer
        check_file("scripts/mass_qwen_analysis.py")     # main script
    
    return solution_with_validation_steps()
```

### 2. –¢–∏–ø–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î (–≥–æ—Ç–æ–≤—ã–µ SQL)
```sql
-- üîç –ü–û–ò–°–ö –ù–ï–ê–ù–ê–õ–ò–ó–ò–†–û–í–ê–ù–ù–´–• –¢–†–ï–ö–û–í QWEN
SELECT COUNT(*) FROM tracks t
LEFT JOIN analysis_results ar ON t.id = ar.track_id 
  AND ar.analyzer_type = 'qwen-3-4b-fp8'
WHERE ar.id IS NULL AND t.lyrics IS NOT NULL;

-- üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û –ò–°–ü–û–õ–ù–ò–¢–ï–õ–Ø–ú
SELECT artist, COUNT(*) as tracks_count
FROM tracks 
WHERE lyrics IS NOT NULL
GROUP BY artist 
ORDER BY tracks_count DESC 
LIMIT 20;

-- üéØ –ü–†–û–ì–†–ï–°–° QWEN –ê–ù–ê–õ–ò–ó–ê
SELECT 
    (SELECT COUNT(*) FROM tracks WHERE lyrics IS NOT NULL) as total_tracks,
    (SELECT COUNT(DISTINCT track_id) FROM analysis_results 
     WHERE analyzer_type = 'qwen-3-4b-fp8') as analyzed_tracks,
    ROUND(100.0 * (SELECT COUNT(DISTINCT track_id) FROM analysis_results 
     WHERE analyzer_type = 'qwen-3-4b-fp8') / 
     (SELECT COUNT(*) FROM tracks WHERE lyrics IS NOT NULL), 2) as percentage;

-- ‚ö° –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –ê–ù–ê–õ–ò–ó–ê
SELECT 
    analyzer_type,
    AVG(processing_time_ms) as avg_time_ms,
    MIN(processing_time_ms) as min_time_ms,
    MAX(processing_time_ms) as max_time_ms,
    COUNT(*) as total_analyses
FROM analysis_results 
WHERE processing_time_ms IS NOT NULL
GROUP BY analyzer_type;
```

### 3. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã PostgreSQL-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```python
# ‚úÖ –•–û–†–û–®–ò–ï –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (PostgreSQL-ready):
from src.database.postgres_adapter import PostgreSQLManager
import asyncpg, psycopg2
async with db_manager.get_connection() as conn:

# ‚ùå –ü–õ–û–•–ò–ï –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (SQLite legacy):
import sqlite3
conn = sqlite3.connect("data/rap_lyrics.db")
```

### 4. –®–∞–±–ª–æ–Ω –æ—Ç–≤–µ—Ç–∞ AI –∞–≥–µ–Ω—Ç–∞
```markdown
## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

**–°—Ç–∞—Ç—É—Å PostgreSQL**: [–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ø—É–ª, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å]
**–°—Ç–∞—Ç—É—Å —Å–∫—Ä–∏–ø—Ç–æ–≤**: [—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, concurrent –¥–æ—Å—Ç—É–ø]
**–°—Ç–∞—Ç—É—Å –¥–∞–Ω–Ω—ã—Ö**: [—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞]

## üìã –ù–ê–•–û–î–ö–ò

**–ü—Ä–æ–±–ª–µ–º–∞**: [–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]
**–ü—Ä–∏—á–∏–Ω–∞**: [root cause —Å –∫–æ–¥–æ–º/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π]
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ**: [–Ω–∞ concurrent processing, –¥–∞–Ω–Ω—ã–µ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å]

## üöÄ –ü–õ–ê–ù –†–ï–®–ï–ù–ò–Ø

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**: [—á—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å]
2. **–ö–æ–¥/–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: [–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö]
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: [–∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏]
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: [–∫–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç]

## ‚úÖ –í–ê–õ–ò–î–ê–¶–ò–Ø

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—à–µ–Ω–∏—è
python scripts/tools/database_diagnostics.py --quick
python scripts/mass_qwen_analysis.py --test
```
```

---

## üîß –ö–û–ú–ê–ù–î–´ –î–õ–Ø AI –ê–ì–ï–ù–¢–ê

### –£—Ä–æ–≤–µ–Ω—å 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–ü–ï–†–í–û–ï, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å)
```bash
# –û–°–ù–û–í–ù–ê–Ø –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ PostgreSQL
python scripts/tools/database_diagnostics.py --quick

# –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
python scripts/tools/database_diagnostics.py

# –°—Ç–∞—Ç—É—Å AI –∞–Ω–∞–ª–∏–∑–∞
python scripts/tools/database_diagnostics.py --analysis

# –ü–æ–∏—Å–∫ –Ω–µ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤
python scripts/tools/database_diagnostics.py --unanalyzed
```

### –£—Ä–æ–≤–µ–Ω—å 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# AI –∞–Ω–∞–ª–∏–∑ —Ç–µ—Å—Ç (–±—ã—Å—Ç—Ä—ã–π)
python scripts/mass_qwen_analysis.py --test

# PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
python -c "
from src.database.postgres_adapter import PostgreSQLManager
import asyncio
async def test():
    db = PostgreSQLManager()
    await db.initialize()
    print('‚úÖ PostgreSQL OK')
    await db.close()
asyncio.run(test())
"

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ë–î
python scripts/db_browser.py
```

### –£—Ä–æ–≤–µ–Ω—å 3: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á
```bash
# –ú–∞—Å—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ (production)
python scripts/mass_qwen_analysis.py

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
python scripts/mass_qwen_analysis.py --batch 50 --max 1000

# –°–∫—Ä–∞–ø–∏–Ω–≥ (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
python scripts/rap_scraper_cli.py scraping --debug
```

### –£—Ä–æ–≤–µ–Ω—å 4: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
psql -h localhost -U rap_user -d rap_lyrics -p 5433

# Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
docker exec rap-analyzer-postgres-vector psql -U rap_user -d rap_lyrics

# –ú–∏–≥—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
python scripts/migrate_to_postgresql.py
```

---

## üéØ –ö–û–ù–ö–†–ï–¢–ù–´–ï –°–¶–ï–ù–ê–†–ò–ò –î–õ–Ø AI –ê–ì–ï–ù–¢–ê

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: "–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–∏–∑"
```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ —à–∞–≥–∞–º
python scripts/tools/database_diagnostics.py --quick
python scripts/mass_qwen_analysis.py --test
cat .env | grep NOVITA  # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å API –∫–ª—é—á
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: "–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö"
```bash
# PostgreSQL health check
python scripts/tools/database_diagnostics.py --quick
python scripts/db_browser.py  # –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
python -c "from src.utils.config import get_db_config; print(get_db_config())"
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: "Concurrent access –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
```bash
# Terminal 1
python scripts/mass_qwen_analysis.py --batch 10 &

# Terminal 2 (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
python scripts/db_browser.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
python scripts/tools/database_diagnostics.py --connections
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: "–ù—É–∂–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞"
```bash
# –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
python scripts/tools/database_diagnostics.py

# –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
python scripts/tools/database_diagnostics.py --quick

# Overlap –∞–Ω–∞–ª–∏–∑ (–µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–π–ª)
python check_overlap.py
```

---

## üö® TROUBLESHOOTING GUIDE

### –ü—Ä–æ–±–ª–µ–º–∞: PostgreSQL –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
cat .env | grep POSTGRES
python -c "import psycopg2; print('‚úÖ psycopg2 OK')"
docker ps | grep postgres  # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker

# –†–µ—à–µ–Ω–∏–µ
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials –≤ .env
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL —Å–µ—Ä–≤–∏—Å
# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç –∏ firewall
```

### –ü—Ä–æ–±–ª–µ–º–∞: AI –∞–Ω–∞–ª–∏–∑ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–∞–º–∏
```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
python scripts/mass_qwen_analysis.py --test --batch 1
cat .env | grep NOVITA_API_KEY
python -c "import requests; print('‚úÖ requests OK')"

# –†–µ—à–µ–Ω–∏–µ
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –∫–ª—é—á
# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å rate limits
# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```

### –ü—Ä–æ–±–ª–µ–º–∞: Concurrent access –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
python scripts/tools/database_diagnostics.py --connections
python -c "
from src.database.postgres_adapter import PostgreSQLManager
print('PostgreSQL adapter:', PostgreSQLManager.__file__)
"

# –†–µ—à–µ–Ω–∏–µ
# 1. –£–≤–µ–ª–∏—á–∏—Ç—å pool size –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PostgreSQLManager –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å async/sync —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
```

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞)

### üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
1. **`models/test_qwen.py`** - ü§ñ **QWEN Primary ML Model** (–ù–û–í–´–ô 2025-09-28)
2. `src/database/postgres_adapter.py` - PostgreSQL connection management
3. `scripts/mass_qwen_analysis.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑ —Å–∫—Ä–∏–ø—Ç  
4. `scripts/tools/database_diagnostics.py` - –≥–ª–∞–≤–Ω—ã–π diagnostic tool
5. **`src/models/ml_api_service.py`** - üöÄ **ML API Service** (Production ML API)
6. **`test_ml_api.py`** - üß™ **ML API Testing** (Test suite –¥–ª—è ML endpoints)
7. `.env` - PostgreSQL credentials –∏ API keys
8. `config.yaml` - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
6. `scripts/db_browser.py` - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä –ë–î
7. `check_stats.py` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
8. `check_overlap.py` - overlap –∞–Ω–∞–ª–∏–∑ (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

### üîß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
9. `scripts/migrate_to_postgresql.py` - migration tools
10. `scripts/rap_scraper_cli.py` - scraping interface

### üì¶ Legacy —Ñ–∞–π–ª—ã (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)
11. `scripts/archive/` - SQLite legacy scripts
12. `data/rap_lyrics.db` - SQLite backup (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

### üìÖ **–•—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–ù–û–í–´–ï –∑–∞–ø–∏—Å–∏ –°–í–ï–†–•–£!)**
‚ö†Ô∏è **–°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ü–†–ê–í–ò–õ–ê:** –≠—Ç–∏ —Ñ–∞–π–ª—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –í –í–ï–†–• —Ñ–∞–π–ª–∞:
- `docs/PROGRESS.md` - –¥–Ω–µ–≤–Ω–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞ (‚úÖ –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ —Å–≤–µ—Ä—Ö—É)
- `CHANGELOG.md` - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –õ—é–±—ã–µ —Ñ–∞–π–ª—ã —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–ª–∏ –ª–æ–≥–∞–º–∏

**–ù–ï –¢–†–ê–¢–¨–¢–ï –¢–û–ö–ï–ù–´** –Ω–∞ –ø–æ–∏—Å–∫ –∫–æ–Ω—Ü–∞ —Ñ–∞–π–ª–∞ - –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ—Å–ª–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞!

---

## üìã –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–û–ù–ù–´–ï –§–ê–ô–õ–´

### `.env` (PostgreSQL credentials)
```env
# PostgreSQL Database
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_USERNAME=rap_user
POSTGRES_PASSWORD=securepassword123
POSTGRES_DATABASE=rap_lyrics

# API Keys
NOVITA_API_KEY=your-novita-api-key-here          # ü§ñ QWEN ML Model (–û–°–ù–û–í–ù–û–ô)
GENIUS_ACCESS_TOKEN=your-genius-token
SPOTIFY_CLIENT_ID=your-spotify-client-id
SPOTIFY_CLIENT_SECRET=your-spotify-client-secret
```

---

## ü§ñ QWEN ML MODEL - –û–°–ù–û–í–ù–ê–Ø –ú–û–î–ï–õ–¨ –î–õ–Ø –û–ë–£–ß–ï–ù–ò–Ø

### üìä –°—Ç–∞—Ç—É—Å QWEN –º–æ–¥–µ–ª–∏ (2025-09-28)
- **üéØ Model**: `qwen/qwen3-4b-fp8` via Novita AI
- **‚úÖ Status**: WORKING (100% success rate)
- **üîå API**: https://api.novita.ai/openai (OpenAI-compatible)
- **üìä Training Dataset**: 1000 samples (800 train / 200 eval)
- **üìà Performance**: MAE: 0.450, RMSE: 0.450
- **üî¢ Token Usage**: ~242 tokens per request, 5947 tokens total training
- **üíæ Results**: `results/qwen_training/` - –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

### üöÄ QWEN –∫–æ–º–∞–Ω–¥—ã (–æ—Å–Ω–æ–≤–Ω—ã–µ –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞)
```bash
# üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï API
python models/test_qwen.py --test-api          # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Novita AI

# üìä –ü–û–î–ì–û–¢–û–í–ö–ê –î–ê–ù–ù–´–•
python models/test_qwen.py --prepare-dataset   # –ó–∞–≥—Ä—É–∑–∫–∞ 1000 samples –∏–∑ PostgreSQL

# üéØ –û–ë–£–ß–ï–ù–ò–ï –ú–û–î–ï–õ–ò  
python models/test_qwen.py --train             # –°–∏–º—É–ª—è—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è (5 samples)

# üìà –û–¶–ï–ù–ö–ê –ö–ê–ß–ï–°–¢–í–ê
python models/test_qwen.py --evaluate          # Evaluation –Ω–∞ 10 samples

# üöÄ –ü–û–õ–ù–´–ô –¶–ò–ö–õ
python models/test_qwen.py --all               # API test + dataset + training + evaluation
```

### üîß QWEN –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã QWEN –º–æ–¥–µ–ª–∏
primary_model = "qwen/qwen3-4b-fp8"            # –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–∞–±–æ—á–∞—è –º–æ–¥–µ–ª—å
base_url = "https://api.novita.ai/openai"      # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π URL
temperature = 0.7                              # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è rap –∞–Ω–∞–ª–∏–∑–∞
max_tokens = 20000                             # –£–≤–µ–ª–∏—á–µ–Ω–æ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
```

### üìÅ QWEN —Ñ–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
models/
‚îú‚îÄ‚îÄ test_qwen.py                 # ü§ñ QWEN Primary ML Model (–û–°–ù–û–í–ù–û–ô)
‚îú‚îÄ‚îÄ [–£–î–ê–õ–ï–ù–û] conditional_generation.py    # GPT-2 –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
‚îú‚îÄ‚îÄ style_transfer.py           # T5 model
‚îú‚îÄ‚îÄ quality_prediction.py       # Quality predictor
‚îî‚îÄ‚îÄ trend_analysis.py          # Trend analysis

results/qwen_training/
‚îú‚îÄ‚îÄ training_dataset.json       # üìä Dataset (1000 samples)
‚îú‚îÄ‚îÄ training_results_*.json     # üéØ Training results 
‚îî‚îÄ‚îÄ evaluation_results_*.json   # üìà Evaluation metrics
```

### üí° QWEN –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞
- **‚úÖ QWEN** - –æ—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –≤—Å–µ—Ö ML –∑–∞–¥–∞—á
- **‚ùå GPT-2** - —É–¥–∞–ª–µ–Ω, –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ QWEN –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é –º–æ–¥–µ–ª—å  
- **üìä Dataset** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ PostgreSQL (57,718 —Ç—Ä–µ–∫–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ)
- **üéØ Training** - —Å–∏–º—É–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ prompt engineering (fine-tuning –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- **üìà Evaluation** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–∏
- **üöÄ Production** - –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ ML API Service

---

### `config.yaml` (—Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
```yaml
app:
  name: "rap-lyrics-analyzer"
  version: "2.0.0"

database:
  type: "postgresql"
  pool_size: 20
  min_connections: 5
  max_connections: 20

kubernetes:
  enabled: true
  namespace: "rap-analyzer"
  deployment:
    replicas: 3
    autoscaling:
      enabled: true
      min_replicas: 3
      max_replicas: 10
  monitoring:
    prometheus: true
    grafana: true
  timeout: 30

analyzers:
  qwen:
    enabled: true
    model: "qwen/qwen3-4b-fp8"
    max_retries: 3
    timeout: 30
  
  gemma:
    enabled: true
    model: "gemma-3-27b-it"
    local: true

performance:
  batch_size: 50
  max_workers: 4
  concurrent_requests: 3
```

---

## ‚úÖ CHECKLIST –î–õ–Ø AI –ê–ì–ï–ù–¢–ê

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `python scripts/tools/database_diagnostics.py --quick`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `.env` —Å PostgreSQL credentials
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –Ω–∞–ª–∏—á–∏–∏ `config.yaml`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `requirements.txt` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

### –ü—Ä–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –ø—Ä–æ–±–ª–µ–º
- [ ] –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞—Ç—å —Å database diagnostics
- [ ] –ü—Ä–æ–≤–µ—Ä—è—Ç—å PostgreSQL vs SQLite —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤ –∫–æ–¥–µ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å concurrent –¥–æ—Å—Ç—É–ø –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- [ ] –ü—Ä–æ–≤–µ—Ä—è—Ç—å API –∫–ª—é—á–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `python scripts/mass_qwen_analysis.py --test`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å connection pool: `database_diagnostics.py --connections`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å concurrent access –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

---

## üéØ SUCCESS METRICS

### Database Health
- ‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ < 100ms
- ‚úÖ Query response < 500ms  
- ‚úÖ Connection pool 15+ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ Data integrity 100%

### Analysis Performance  
- ‚úÖ Qwen API success rate > 90%
- ‚úÖ Processing rate ~2-5 tracks/min
- ‚úÖ Error recovery —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Progress tracking —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

### Concurrent Processing
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ No database locks
- ‚úÖ Transaction isolation —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Connection pool –Ω–µ –∏—Å—á–µ—Ä–ø—ã–≤–∞–µ—Ç—Å—è

---

## üí° AI AGENT OPTIMIZATION NOTES

### –ù–ï –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑:
- ‚ùå –°—Ö–µ–º—É —Ç–∞–±–ª–∏—Ü (–æ–Ω–∞ –≤ —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ)
- ‚ùå –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ë–î (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è –≤—ã—à–µ)
- ‚ùå –°–ø–∏—Å–æ–∫ –∫–æ–ª–æ–Ω–æ–∫ (—Å–º. CREATE TABLE –≤—ã—à–µ)
- ‚ùå –¢–∏–ø—ã –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ (—Å–º. —Ç–∞–±–ª–∏—Ü—É –ø–æ–∫—Ä—ã—Ç–∏—è)

### –ù–£–ñ–ù–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ:
- ‚úÖ SQL-–∑–∞–ø—Ä–æ—Å—ã –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–í–ê–ñ–ù–´–ï SQL-–ó–ê–ü–†–û–°–´"
- ‚úÖ Commands –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ö–û–ú–ê–ù–î–´ –î–õ–Ø AI –ê–ì–ï–ù–¢–ê"
- ‚úÖ Troubleshooting scenarios
- ‚úÖ Database diagnostics –∫–∞–∫ –ø–µ—Ä–≤—ã–π —à–∞–≥
- ‚úÖ **–•–†–û–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ï –§–ê–ô–õ–´:** –î–æ–±–∞–≤–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ –í –í–ï–†–• (PROGRESS.md, changelog)

### –ü–ï–†–í–´–ï –ö–û–ú–ê–ù–î–´ –ø—Ä–∏ –ª—é–±–æ–π –ø—Ä–æ–±–ª–µ–º–µ:
1. `python scripts/tools/database_diagnostics.py --quick`
2. `python scripts/mass_qwen_analysis.py --test` (–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞)
3. `python scripts/db_browser.py` (–¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)

---

## üöÄ KUBERNETES DEPLOYMENT

### Quick Start Commands (GitOps Approach)
```bash
# OPTION 1: GitOps Deployment (Recommended)
./gitops/install-argocd.ps1                              # Install ArgoCD
kubectl port-forward svc/argocd-server -n argocd 8080:443  # Access ArgoCD UI
# https://localhost:8080 (admin/admin123)

# OPTION 2: Direct Helm Deployment
helm install rap-analyzer ./helm/rap-analyzer --create-namespace --namespace rap-analyzer

# Check deployment status
kubectl get pods -n rap-analyzer
kubectl get applications -n argocd                       # ArgoCD applications

# Access applications
kubectl port-forward svc/rap-analyzer-service 8000:8000 -n rap-analyzer
kubectl port-forward svc/grafana-service 3000:3000 -n rap-analyzer
```

### Monitoring URLs (–ø–æ—Å–ª–µ port-forward)
- **ArgoCD**: https://localhost:8080 (admin/admin123) - GitOps management
- **API**: http://localhost:8000/docs - FastAPI documentation
- **Grafana**: http://localhost:3000 (admin/admin123) - Monitoring dashboards
- **Prometheus**: http://localhost:9090 - Metrics collection

### GitOps Configuration
- **ArgoCD Setup**: `gitops/argocd/` - Complete ArgoCD installation
- **Applications**: `gitops/applications/rap-analyzer-app.yaml` - App configuration
- **Installation**: `gitops/install-argocd.ps1` - Automated ArgoCD deployment
- **Documentation**: `gitops/README.md` - Comprehensive GitOps guide

### Helm Configuration
- **Chart Location**: `helm/rap-analyzer/`
- **Values**: `helm/rap-analyzer/values.yaml` (80+ parameters)
- **Templates**: Kubernetes manifests –≤ `helm/rap-analyzer/templates/`

---

**REMEMBER**: –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Kubernetes-native –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å PostgreSQL + pgvector –¥–ª—è production deployment. –î–ª—è development - –∏—Å–ø–æ–ª—å–∑—É–π Docker Compose. –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π –≥–æ—Ç–æ–≤—É—é —Å—Ö–µ–º—É –ë–î –∏–∑ —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤–º–µ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ! –í—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —É–∂–µ —É–∫–∞–∑–∞–Ω—ã –≤—ã—à–µ.